<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Proyecto Anti-Coimas</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
    h1 { text-align: center; }
    .card { background: white; padding: 20px; margin: 20px auto; max-width: 600px; border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    .card img { width: 120px; border-radius: 50%; }
    .info { margin-top: 10px; }
    form { margin-top: 15px; }
    textarea { width: 100%; min-height: 80px; margin-top: 10px; }
    input[type="file"] { margin-top: 10px; }
    button { margin-top: 10px; padding: 8px 12px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; }
    button:hover { background: #0056b3; }
    .comentarios { margin-top: 15px; }
    .comentario { background: #eee; padding: 10px; border-radius: 6px; margin-top: 10px; }
    .archivo { margin-top: 5px; }
    .qr { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Proyecto Anti-Coimas</h1>

  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

  <div id="personas"></div>

  <script>
    const baseUrl = "https://proyectoanticoimas.netlify.app";
    const personas = [
      { nombre: "Favio Paiva", sexo: "Masculino", rango: "Suboficial", edad: 36, foto: "https://randomuser.me/api/portraits/men/11.jpg" },
      { nombre: "Henry Perez", sexo: "Masculino", rango: "Teniente", edad: 42, foto: "https://randomuser.me/api/portraits/men/12.jpg" },
      { nombre: "Adriano Jimenez", sexo: "Masculino", rango: "Capitán", edad: 39, foto: "https://randomuser.me/api/portraits/men/13.jpg" },
      { nombre: "José Martinez", sexo: "Masculino", rango: "Coronel", edad: 50, foto: "https://randomuser.me/api/portraits/men/14.jpg" },
      { nombre: "Luis Herrera", sexo: "Masculino", rango: "Sargento", edad: 34, foto: "https://randomuser.me/api/portraits/men/15.jpg" },
      { nombre: "Carlos Ramirez", sexo: "Masculino", rango: "Mayor", edad: 45, foto: "https://randomuser.me/api/portraits/men/16.jpg" },
      { nombre: "Miguel Torres", sexo: "Masculino", rango: "Subteniente", edad: 29, foto: "https://randomuser.me/api/portraits/men/17.jpg" },
      { nombre: "Andrés Silva", sexo: "Masculino", rango: "Comandante", edad: 47, foto: "https://randomuser.me/api/portraits/men/18.jpg" },
      { nombre: "Ricardo López", sexo: "Masculino", rango: "General", edad: 55, foto: "https://randomuser.me/api/portraits/men/19.jpg" },
      { nombre: "Jorge Castro", sexo: "Masculino", rango: "Suboficial", edad: 32, foto: "https://randomuser.me/api/portraits/men/20.jpg" }
    ];

    const contenedor = document.getElementById("personas");

    personas.forEach(p => {
      const div = document.createElement("div");
      div.className = "card";

      div.innerHTML = `
        <h2>${p.nombre}</h2>
        <img src="${p.foto}" alt="Foto de ${p.nombre}">
        <div class="info">
          <p><b>Sexo:</b> ${p.sexo}</p>
          <p><b>Rango:</b> ${p.rango}</p>
          <p><b>Edad:</b> ${p.edad}</p>
        </div>

        <div class="qr" id="qr-${p.nombre.replace(/ /g,'-')}"></div>

        <form onsubmit="guardarComentario(event, '${p.nombre}')">
          <textarea required placeholder="Escribe tu comentario..."></textarea><br>
          <input type="file" accept="image/*,audio/*,.pdf" required><br>
          <button type="submit">Enviar</button>
        </form>
        <div class="comentarios" id="comentarios-${p.nombre}"></div>
      `;

      contenedor.appendChild(div);

      // Generar QR único que apunta directo a la sección de comentarios
      const url = `${baseUrl}#comentarios-${encodeURIComponent(p.nombre)}`;
      QRCode.toCanvas(document.getElementById(`qr-${p.nombre.replace(/ /g,'-')}`), url, { width: 100 });
    });

    function guardarComentario(event, nombre) {
      event.preventDefault();
      const form = event.target;
      const texto = form.querySelector("textarea").value;
      const archivoInput = form.querySelector("input[type=file]");
      const archivo = archivoInput.files[0];

      const comentariosDiv = document.getElementById("comentarios-" + nombre);

      const div = document.createElement("div");
      div.className = "comentario";
      div.innerHTML = `<p><b>Comentario:</b> ${texto}</p>`;

      if (archivo) {
        const archivoDiv = document.createElement("div");
        archivoDiv.className = "archivo";

        if (archivo.type.startsWith("image/")) {
          const img = document.createElement("img");
          img.src = URL.createObjectURL(archivo);
          img.style.maxWidth = "200px";
          archivoDiv.appendChild(img);
        } else if (archivo.type.startsWith("audio/")) {
          const audio = document.createElement("audio");
          audio.controls = true;
          audio.src = URL.createObjectURL(archivo);
          archivoDiv.appendChild(audio);
        } else if (archivo.type === "application/pdf") {
          const link = document.createElement("a");
          link.href = URL.createObjectURL(archivo);
          link.textContent = "Ver PDF";
          link.target = "_blank";
          archivoDiv.appendChild(link);
        }

        div.appendChild(archivoDiv);
      }

      comentariosDiv.appendChild(div);
      form.reset();
    }
  </script>
</body>
</html>


